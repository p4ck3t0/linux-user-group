{{ define "main" }}
<main id="main">
  <h1>{{ .Title }}</h1>
  {{ .Content }} {{ if site.Params.search }} {{ end }}
  <h1>Current posts</h1>
  <ul class="patterns-list" id="list">
    {{ range .Site.RegularPages.ByPublishDate.Reverse }}
    <li>
      <h2>
        <a href="{{ .RelPermalink }}">
          <svg
            class="bookmark"
            aria-hidden="true"
            viewBox="0 0 40 50"
            focusable="false"
          >
            <use xlink:href="#bookmark"></use>
          </svg>
          {{ .Title }}
        </a>
      </h2>
      <div>{{ .Summary }}</div>
    </li>
    {{ end }}
  </ul>
  <h1>Contact us</h1>
  <input id="email" type="text" placeholder="Your email" />
  <textarea id="textfield" placeholder="Your message"></textarea>
  <button id="send-button" onclick="sendMail();">Send mail</button>
</main>

<script>
  const socket = new WebSocket("ws://192.168.178.37:4253");

  function sendMail() {
    console.log("hehe");

    var userEmail = document.querySelector("#email").value;
    var userText = document.querySelector("#textfield").value;
    
    var sendMailData = {
      email: email,
      text: userText,
    };

    socket.send(JSON.stringify(sendMailData));
  }
</script>
{{ end }}
